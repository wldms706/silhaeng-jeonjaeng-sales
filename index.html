<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시스템 메이킹 : 8주 프로젝트 - 현장 개입 · 실행 관리 · 구조 설계</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <p class="hero-tag">1기 모집 · 선착순 4명</p>
            <h1 class="hero-headline">
                이번 달,<br>
                <span class="highlight">즉시 매출</span>이<br>
                발생합니다
            </h1>
            <p class="hero-sub">
                현장 개입 · 실행 관리 · 구조 설계<br>
                뷰티샵 원장님을 위한 8주 프로그램
            </p>
            <a href="#apply" class="cta-button">1기 지원하기</a>
        </div>
        <div class="scroll-indicator">
            <span></span>
        </div>
    </section>

    <!-- 1. 문제 인식 -->
    <section class="section problem-v2">
        <div class="container">
            <h2 class="section-title-v2">혹시 이런 상태 아니신가요?</h2>
            <div class="problem-list-v2">
                <p class="problem-line">"인스타 열심히 하는데 <strong>문의가 안 와요.</strong>"</p>
                <p class="problem-line">"광고가 중요한 건 아는데 <strong>뭐부터 해야 할지 모르겠어요.</strong>"</p>
                <p class="problem-line">"릴스, 블로그, 광고… <strong>알겠는데 실행이 안 돼요.</strong>"</p>
                <p class="problem-line">"시간만 지나고 <strong>아무것도 안 바뀌어요.</strong>"</p>
            </div>
            <p class="problem-closing">
                원장님 잘못이 아닙니다.<br>
                <strong>실행을 강제로 만들어주는 구조</strong>가 없었을 뿐이에요.
            </p>
        </div>
    </section>

    <!-- 2. 왜 이 프로그램인가 -->
    <section class="section why-v2">
        <div class="container">
            <p class="section-tag">WHY THIS PROGRAM</p>
            <h2 class="section-title-v2">
                시스템 메이킹은<br>
                <span class="highlight">듣고 끝나는 강의가 아닙니다</span>
            </h2>

            <div class="why-grid">
                <div class="why-card">
                    <span class="why-number">01</span>
                    <h3>직접 실행해드립니다</h3>
                    <p>매장 방문 → 촬영 → 릴스 편집 → 광고 집행<br><strong>제가 직접</strong> 해드립니다.</p>
                </div>
                <div class="why-card">
                    <span class="why-number">02</span>
                    <h3>첫 달부터 매출 구조</h3>
                    <p>이론이 아니라 <strong>이번 달 매출</strong>을<br>만드는 실행 프로세스입니다.</p>
                </div>
                <div class="why-card">
                    <span class="why-number">03</span>
                    <h3>8주 밀착 관리</h3>
                    <p>혼자 고민하지 마세요.<br><strong>매주 1:1 줌 미팅</strong>으로 체크합니다.</p>
                </div>
            </div>

            <div class="why-philosophy">
                <p>솔직히, 원장님들께 필요한 건 많지 않습니다.</p>
                <p><strong>제대로 된 방법 + 꾸준한 실행.</strong></p>
                <p>그게 전부입니다.</p>
            </div>
        </div>
    </section>

    <!-- 3. 실제 결과 - 무한 캐러셀 -->
    <section class="section results-v2">
        <div class="container">
            <p class="section-tag">REAL RESULTS</p>
            <h2 class="section-title-v2">실제 원장님들의 변화</h2>

            <div class="results-note">
                <p>솔직히 말하면, 지금 공개된 숫자는 화려하지 않습니다.</p>
                <p>이분들은 <strong>단 1회 코칭</strong>만 받고 바뀌기 시작한 단계이기 때문입니다.</p>
                <p>그럼에도 문의가 들어오고, 예약이 생기고, <strong>매출이 실제로 발생했습니다.</strong></p>
            </div>
        </div>

        <!-- 무한 캐러셀 (container 밖으로) -->
        <div class="review-carousel">
            <div class="review-track">
                <!-- 원본 카드 6개 -->
                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">충남</span>
                        <span class="review-name">A 원장님</span>
                    </div>
                    <p class="review-content">
                        오픈하자마자 지은 원장님이 릴스를 직접 만들어주셔서 바로 홍보했어요.
                        그때부터 흐름이 잡혔고,
                        지금은 꾸준히 <strong>월 매출 400만원</strong> 이상 나오고 있어요.
                    </p>
                    <div class="review-btn-group">
                        <button class="review-btn" onclick="openReviewModal('review/a.jpeg')">후기 이미지 보기</button>
                        <button class="review-btn" onclick="openReviewModal('review/a2.jpeg')">후기 이미지 보기</button>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">충남</span>
                        <span class="review-name">B 원장님</span>
                    </div>
                    <p class="review-content">
                        매출이 늘 <strong>350~400만원</strong>에서 정체돼 있었고
                        뭘 어떻게 실행해야 할지 막막했어요.
                        지은 원장님이 릴스 기획부터 편집, 광고 집행까지 직접 해주셨고,
                        <strong>한 달 만에 매출이 2배</strong>로 올랐습니다.
                    </p>
                    <div class="review-btn-group">
                        <button class="review-btn" onclick="openReviewModal('review/b.jpeg')">후기 이미지 보기</button>
                        <button class="review-btn" onclick="openReviewModal('review/b2.jpeg')">후기 이미지 보기</button>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">서울</span>
                        <span class="review-name">C 원장님</span>
                    </div>
                    <p class="review-content">
                        샵 매출이 불안해서 유치원 보조 교사로 투잡을 하고 있었어요.
                        그런데 매출이 오르는 걸 체감하면서
                        이제는 <strong>샵에만 집중</strong>할 수 있게 됐어요.
                    </p>
                    <button class="review-btn" onclick="openReviewModal('review/C.jpeg')">후기 이미지 보기</button>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">서울</span>
                        <span class="review-name">D 원장님</span>
                    </div>
                    <p class="review-content">
                        1:1 컨설팅을 듣고 가격 조정과 홍보 방식을 바꿨습니다.
                        그 결과 <strong>한 달 만에 매출이 300만원에서 500만원</strong>으로 증가했어요.
                    </p>
                    <div class="review-btn-group">
                        <button class="review-btn" onclick="openReviewModal('review/d.jpeg')">후기 이미지 보기</button>
                        <button class="review-btn" onclick="openReviewModal('review/d2.png')">후기 이미지 보기</button>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">경기도</span>
                        <span class="review-name">E 원장님</span>
                    </div>
                    <p class="review-content">
                        월 매출이 <strong>100만원</strong>도 안 돼서 헬스장 투잡 알바를 했었어요.
                        1:1 컨설팅 때 만들어준 릴스 대본으로 광고를 돌렸고,
                        매출이 <strong>230만원대</strong>까지 올라 투잡을 정리했습니다.
                        지금은 샵 운영에만 전념하고 있어요.
                    </p>
                    <button class="review-btn" onclick="openReviewModal('review/e1.jpeg')">후기 이미지 보기</button>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">서울</span>
                        <span class="review-name">F 원장님</span>
                    </div>
                    <p class="review-content">
                        1:1 컨설팅을 받은 뒤
                        지은 원장님이 잡아준 방향대로 릴스를 제작해 홍보했어요.
                        그 결과 <strong>외국인 손님 예약</strong>까지 이어졌고,
                        이 방식이 실제로 통한다는 확신이 생겼습니다.
                    </p>
                    <button class="review-btn" onclick="openReviewModal('review/F.jpeg')">후기 이미지 보기</button>
                </div>

                <!-- 복제 카드 6개 (무한 루프용) -->
                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">충남</span>
                        <span class="review-name">A 원장님</span>
                    </div>
                    <p class="review-content">
                        오픈하자마자 지은 원장님이 릴스를 직접 만들어주셔서 바로 홍보했어요.
                        그때부터 흐름이 잡혔고,
                        지금은 꾸준히 <strong>월 매출 400만원</strong> 이상 나오고 있어요.
                    </p>
                    <div class="review-btn-group">
                        <button class="review-btn" onclick="openReviewModal('review/a.jpeg')">후기 이미지 보기</button>
                        <button class="review-btn" onclick="openReviewModal('review/a2.jpeg')">후기 이미지 보기</button>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">충남</span>
                        <span class="review-name">B 원장님</span>
                    </div>
                    <p class="review-content">
                        매출이 늘 <strong>350~400만원</strong>에서 정체돼 있었고
                        뭘 어떻게 실행해야 할지 막막했어요.
                        지은 원장님이 릴스 기획부터 편집, 광고 집행까지 직접 해주셨고,
                        <strong>한 달 만에 매출이 2배</strong>로 올랐습니다.
                    </p>
                    <div class="review-btn-group">
                        <button class="review-btn" onclick="openReviewModal('review/b.jpeg')">후기 이미지 보기</button>
                        <button class="review-btn" onclick="openReviewModal('review/b2.jpeg')">후기 이미지 보기</button>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">서울</span>
                        <span class="review-name">C 원장님</span>
                    </div>
                    <p class="review-content">
                        샵 매출이 불안해서 유치원 보조 교사로 투잡을 하고 있었어요.
                        그런데 매출이 오르는 걸 체감하면서
                        이제는 <strong>샵에만 집중</strong>할 수 있게 됐어요.
                    </p>
                    <button class="review-btn" onclick="openReviewModal('review/C.jpeg')">후기 이미지 보기</button>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">서울</span>
                        <span class="review-name">D 원장님</span>
                    </div>
                    <p class="review-content">
                        1:1 컨설팅을 듣고 가격 조정과 홍보 방식을 바꿨습니다.
                        그 결과 <strong>한 달 만에 매출이 300만원에서 500만원</strong>으로 증가했어요.
                    </p>
                    <div class="review-btn-group">
                        <button class="review-btn" onclick="openReviewModal('review/d.jpeg')">후기 이미지 보기</button>
                        <button class="review-btn" onclick="openReviewModal('review/d2.png')">후기 이미지 보기</button>
                    </div>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">경기도</span>
                        <span class="review-name">E 원장님</span>
                    </div>
                    <p class="review-content">
                        월 매출이 <strong>100만원</strong>도 안 돼서 헬스장 투잡 알바를 했었어요.
                        1:1 컨설팅 때 만들어준 릴스 대본으로 광고를 돌렸고,
                        매출이 <strong>230만원대</strong>까지 올라 투잡을 정리했습니다.
                        지금은 샵 운영에만 전념하고 있어요.
                    </p>
                    <button class="review-btn" onclick="openReviewModal('review/e1.jpeg')">후기 이미지 보기</button>
                </div>

                <div class="review-card">
                    <div class="review-card-header">
                        <span class="review-location">서울</span>
                        <span class="review-name">F 원장님</span>
                    </div>
                    <p class="review-content">
                        1:1 컨설팅을 받은 뒤
                        지은 원장님이 잡아준 방향대로 릴스를 제작해 홍보했어요.
                        그 결과 <strong>외국인 손님 예약</strong>까지 이어졌고,
                        이 방식이 실제로 통한다는 확신이 생겼습니다.
                    </p>
                    <button class="review-btn" onclick="openReviewModal('review/F.jpeg')">후기 이미지 보기</button>
                </div>
            </div>
        </div>

        <div class="container">
            <p class="review-disclaimer">※ 모든 후기는 실제 카카오톡 대화 캡쳐이며, 개인정보 보호를 위해 일부만 공개합니다.</p>

            <div class="results-bottom">
                <p>단 1회로 이 정도라면,<br><strong>8주 동안 같이 움직이면 결과는 달라질 수밖에 없습니다.</strong></p>
            </div>
        </div>
    </section>

    <!-- 현장 영상 (간략화) -->
    <section class="section video-v2">
        <div class="container">
            <h2 class="section-title-v2">현장에서 직접 실행합니다</h2>
            <p class="video-desc">매장 방문 · 촬영 · 릴스 제작 · 광고 집행</p>
            <div class="video-carousel">
                <div class="video-track">
                    <div class="video-card">
                        <div class="video-card-wrapper">
                            <video autoplay muted loop playsinline>
                                <source src="daehang/daehang.mp4" type="video/mp4">
                            </video>
                        </div>
                    </div>
                    <div class="video-card">
                        <div class="video-card-wrapper">
                            <video autoplay muted loop playsinline>
                                <source src="daehang/daehang change.mp4" type="video/mp4">
                            </video>
                        </div>
                    </div>
                    <div class="video-card">
                        <div class="video-card-wrapper">
                            <video autoplay muted loop playsinline>
                                <source src="daehang/daehang3.MOV" type="video/mp4">
                            </video>
                        </div>
                    </div>
                </div>
                <div class="video-dots">
                    <span class="dot active" data-index="0"></span>
                    <span class="dot" data-index="1"></span>
                    <span class="dot" data-index="2"></span>
                </div>
            </div>
        </div>
    </section>

    <!-- 4. 누가 직접 도와주는가 -->
    <section class="section profile-v2">
        <div class="container">
            <p class="section-tag">WHO I AM</p>
            <h2 class="section-title-v2">정지은</h2>
            <p class="profile-subtitle-v2">전 정감브로우 원장 · 7년 현장 경험</p>

            <div class="profile-content-v2">
                <div class="profile-image-v2">
                    <img src="profile.JPG" alt="정지은 원장">
                </div>
                <div class="profile-text-v2">
                    <p class="profile-intro-v2">
                        저는 강의만 하는 사람이 아닙니다.<br>
                        <strong>직접 매장을 운영하며 매출을 만들어본 원장</strong>입니다.
                    </p>
                    <ul class="profile-stats">
                        <li>뉴질랜드 <strong>월 1,600만원</strong></li>
                        <li>한국 <strong>월 2,800만원</strong></li>
                        <li>현장 실무 <strong>7년</strong></li>
                    </ul>
                    <p class="profile-method">
                        저는 "이렇게 하세요"라고 말하고 끝내지 않습니다.<br>
                        <strong>촬영을 같이 하고, 글을 같이 씁니다.</strong>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- 5. 나에게 맞는지 -->
    <section class="section fit-v2">
        <div class="container">
            <p class="section-tag">IS THIS FOR ME?</p>
            <h2 class="section-title-v2">이런 분과 잘 맞습니다</h2>

            <div class="fit-grid">
                <div class="fit-card fit-good">
                    <h3>잘 맞는 경우</h3>
                    <ul>
                        <li>매장은 있는데 마케팅이 습관이 안 된 분</li>
                        <li>처음부터 다시 체계를 잡고 싶은 분</li>
                        <li>코칭에 맞춰 <strong>실제로 움직일 준비가 된 분</strong></li>
                    </ul>
                </div>
                <div class="fit-card fit-not">
                    <h3>안 맞을 수 있는 경우</h3>
                    <ul>
                        <li>단기 숫자 변화만 기대하는 경우</li>
                        <li>대신 해주길 바라는 경우</li>
                        <li>마케팅을 일회성 이벤트로 생각하는 경우</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 6. 가격과 지원 -->
    <section class="section pricing-v2" id="apply">
        <div class="container">
            <p class="section-tag">PRICE</p>
            <h2 class="section-title-v2">8주 프로그램</h2>

            <div class="price-box">
                <div class="price-main">
                    <span class="price-number">330</span><span class="price-unit">만원</span>
                </div>
                <p class="price-note">카드 결제 가능 · VAT 별도</p>
                <div class="price-meta">
                    <span>기간: <strong>8주</strong></span>
                    <span>인원: <strong>선착순 4명</strong></span>
                </div>
            </div>

            <div class="included-box">
                <h3>포함 내용</h3>
                <ul>
                    <li><strong>1회 오프라인 매장 방문</strong> (촬영 + 상담 코칭)</li>
                    <li><strong>릴스 기획 → 편집 → 광고 집행</strong></li>
                    <li>매주 1:1 줌 미팅</li>
                    <li>매일 실행 관리 (1-4주)</li>
                    <li>블로그 주 2회 피드백</li>
                    <li>블로그 기자단 20명 (55만원 상당)</li>
                    <li>블로그 전용 GPT (50만원 상당)</li>
                </ul>
            </div>

            <!-- 커리큘럼 토글 버튼 -->
            <div class="curriculum-toggle">
                <button class="curriculum-btn" id="curriculumToggle">
                    8주 커리큘럼 자세히 보기
                    <span class="toggle-arrow">▼</span>
                </button>
            </div>

            <!-- 커리큘럼 접힘 영역 -->
            <div class="curriculum-detail" id="curriculumDetail">
                <div class="curriculum-phase">
                    <h4>WEEK 1-4 · 밀착 실행 구간</h4>
                    <p class="phase-sub">정지은 직접 개입 · 매주 줌 미팅 · 매일 실행 가이드</p>
                    <div class="week-list">
                        <div class="week-item">
                            <span class="week-badge">W1</span>
                            <div>
                                <strong>진단 & 세팅</strong>
                                <p>현재 상태 분석 + 즉시 개선점 도출</p>
                            </div>
                        </div>
                        <div class="week-item">
                            <span class="week-badge">W2</span>
                            <div>
                                <strong>현장 방문 & 촬영</strong>
                                <p>오프라인 매장 방문 + 상담 코칭 + 전체 촬영</p>
                            </div>
                        </div>
                        <div class="week-item">
                            <span class="week-badge">W3</span>
                            <div>
                                <strong>릴스 제작 & 광고</strong>
                                <p>촬영 기반 릴스 편집 + 광고 집행 → 즉시 매출 연결</p>
                            </div>
                        </div>
                        <div class="week-item">
                            <span class="week-badge">W4</span>
                            <div>
                                <strong>구조화 & 점검</strong>
                                <p>실행 흐름 정리 + 블로그 피드백 완료</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="curriculum-divider">
                    <p>5주차부터는 대신 해주는 구간이 아닙니다.<br><strong>혼자서도 굴릴 수 있는지 확인하는 구간입니다.</strong></p>
                </div>

                <div class="curriculum-phase phase-light">
                    <h4>WEEK 5-8 · 확장 & 고도화 단계</h4>
                    <p class="phase-sub">1-4주가 시동이라면, 5-8주는 가속입니다.</p>
                    <div class="week-list">
                        <div class="week-item">
                            <span class="week-badge light">W5</span>
                            <div>
                                <strong>전환율 정밀 분석</strong>
                                <p>문의→예약→내원→결제 단계별 이탈 분석</p>
                            </div>
                        </div>
                        <div class="week-item">
                            <span class="week-badge light">W6</span>
                            <div>
                                <strong>고효율 채널 집중</strong>
                                <p>ROI 기준 채널 재배열 + 예산 집중</p>
                            </div>
                        </div>
                        <div class="week-item">
                            <span class="week-badge light">W7</span>
                            <div>
                                <strong>재방문 설계</strong>
                                <p>리콜 시나리오 + 소개 유도 스크립트</p>
                            </div>
                        </div>
                        <div class="week-item">
                            <span class="week-badge light">W8</span>
                            <div>
                                <strong>자동화 & 유지 구조</strong>
                                <p>운영 매뉴얼 + 3개월 로드맵 완성</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="curriculum-closing">
                    <p><strong>8주가 끝나면 남는 것:</strong><br>
                    강의 수료증이 아니라,<br>
                    <span class="highlight">실제로 매출이 발생하고 있는 구조</span> 그 자체입니다.</p>
                </div>
            </div>

            <!-- 지원 현황 -->
            <div class="application-status">
                <div class="status-item">
                    <span class="status-label">관심 등록</span>
                    <span class="status-value"><span id="clickCount">0</span>회</span>
                </div>
                <div class="status-divider"></div>
                <div class="status-item">
                    <span class="status-label">현재 지원</span>
                    <span class="status-value"><span id="applicationCount">0</span> / 4명</span>
                </div>
            </div>

            <!-- 최종 CTA -->
            <div class="final-cta">
                <p class="cta-trigger">
                    합법화는 시작일 뿐입니다.<br>
                    중요한 건 <strong>그 전에 준비되어 있느냐</strong>입니다.
                </p>
                <a href="https://forms.gle/your-form-link" class="cta-button cta-final" id="applyBtn" target="_blank">
                    1기 지원하기
                </a>
                <p class="cta-urgency" id="urgencyText">선착순 4명</p>
            </div>
        </div>
    </section>

    <!-- FAQ (간략화) -->
    <section class="section faq-v2">
        <div class="container">
            <h2 class="section-title-v2">자주 묻는 질문</h2>
            <div class="faq-list-v2">
                <div class="faq-item-v2">
                    <h3>Q. 8주 동안 효과가 있나요?</h3>
                    <p>네. 실행 중심이라 <strong>빠르면 1주차</strong>부터 변화가 시작됩니다.</p>
                </div>
                <div class="faq-item-v2">
                    <h3>Q. SNS를 잘 못해도 되나요?</h3>
                    <p>오히려 환영합니다. <strong>템플릿과 스크립트</strong>를 드립니다.</p>
                </div>
                <div class="faq-item-v2">
                    <h3>Q. 환불은요?</h3>
                    <p>프로그램 시작 전 100% 환불 가능합니다.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>© 2024 시스템 메이킹. All rights reserved.</p>
        </div>
    </footer>

    <!-- 이미지 확대 모달 -->
    <div class="img-modal" id="imgModal" aria-hidden="true">
        <div class="img-modal__backdrop"></div>
        <div class="img-modal__content">
            <img id="imgModalImg" alt="" />
            <button class="img-modal__close" type="button">닫기</button>
        </div>
    </div>

    <script>
        document.body.classList.add('js-loaded');

        document.addEventListener('DOMContentLoaded', function() {
            // Smooth scroll
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });

            // Scroll indicator fade
            window.addEventListener('scroll', () => {
                const scrollIndicator = document.querySelector('.scroll-indicator');
                if (scrollIndicator) {
                    scrollIndicator.style.opacity = 1 - (window.scrollY / 300);
                }
            });

            // Intersection Observer
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

            document.querySelectorAll('.section').forEach(section => observer.observe(section));

            // Video Carousel
            const carousel = document.querySelector('.video-carousel');
            if (carousel) {
                const track = carousel.querySelector('.video-track');
                const dots = carousel.querySelectorAll('.dot');
                let currentIndex = 0;

                function updateCarousel() {
                    if (window.innerWidth <= 768) {
                        track.style.transform = `translateX(-${currentIndex * 100}%)`;
                        dots.forEach((dot, i) => dot.classList.toggle('active', i === currentIndex));
                    } else {
                        track.style.transform = 'translateX(0)';
                    }
                }

                dots.forEach(dot => {
                    dot.addEventListener('click', () => {
                        currentIndex = parseInt(dot.dataset.index);
                        updateCarousel();
                    });
                });

                let touchStartX = 0;
                track.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX);
                track.addEventListener('touchend', e => {
                    const diff = touchStartX - e.changedTouches[0].screenX;
                    if (Math.abs(diff) > 50) {
                        if (diff > 0 && currentIndex < 2) currentIndex++;
                        else if (diff < 0 && currentIndex > 0) currentIndex--;
                        updateCarousel();
                    }
                });

                window.addEventListener('resize', updateCarousel);
                updateCarousel();
            }

            // 커리큘럼 토글
            const toggleBtn = document.getElementById('curriculumToggle');
            const curriculumDetail = document.getElementById('curriculumDetail');

            if (toggleBtn && curriculumDetail) {
                toggleBtn.addEventListener('click', () => {
                    curriculumDetail.classList.toggle('open');
                    toggleBtn.classList.toggle('open');
                });
            }

            // Supabase 설정
            const SUPABASE_URL = 'YOUR_SUPABASE_URL';
            const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY';
            let supabase = null;
            let isSupabaseConfigured = false;

            if (SUPABASE_URL !== 'YOUR_SUPABASE_URL') {
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                isSupabaseConfigured = true;
            }

            const clickCountEl = document.getElementById('clickCount');
            const applicationCountEl = document.getElementById('applicationCount');
            const urgencyText = document.getElementById('urgencyText');

            async function loadCounts() {
                if (!isSupabaseConfigured) {
                    const localClicks = localStorage.getItem('silhaeng_clicks') || '0';
                    const localApps = localStorage.getItem('silhaeng_applications') || '0';
                    if (clickCountEl) clickCountEl.textContent = localClicks;
                    if (applicationCountEl) applicationCountEl.textContent = localApps;
                    return;
                }

                try {
                    const { count: clickCount } = await supabase.from('clicks').select('*', { count: 'exact', head: true });
                    const { count: appCount } = await supabase.from('applications').select('*', { count: 'exact', head: true }).in('status', ['submitted', 'paid']);
                    if (clickCountEl) clickCountEl.textContent = clickCount || 0;
                    if (applicationCountEl) applicationCountEl.textContent = appCount || 0;

                    const remaining = 4 - (appCount || 0);
                    if (urgencyText) urgencyText.textContent = remaining > 0 ? `선착순 ${remaining}자리 남음` : '마감 임박';
                } catch (error) {
                    console.error('Load failed:', error);
                }
            }

            loadCounts();

            // 이미지 모달
            const imgModal = document.getElementById('imgModal');
            const imgModalImg = document.getElementById('imgModalImg');

            window.openReviewModal = function(src) {
                imgModal.classList.add('is-open');
                imgModal.setAttribute('aria-hidden', 'false');
                imgModalImg.src = src;
            };

            document.addEventListener('click', (e) => {
                if (!imgModal.classList.contains('is-open')) return;
                if (e.target.classList.contains('img-modal__backdrop') || e.target.classList.contains('img-modal__close')) {
                    imgModal.classList.remove('is-open');
                    imgModal.setAttribute('aria-hidden', 'true');
                    imgModalImg.src = '';
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && imgModal.classList.contains('is-open')) {
                    imgModal.classList.remove('is-open');
                    imgModalImg.src = '';
                }
            });
        });
    </script>
</body>
</html>
